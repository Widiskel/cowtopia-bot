const a2_0x5f3ab1=a2_0x1a39;function a2_0x1a39(_0x87fe9f,_0x21188b){const _0x4a0911=a2_0x4a09();return a2_0x1a39=function(_0x1a393e,_0x40fd8d){_0x1a393e=_0x1a393e-0xe9;let _0x3c605d=_0x4a0911[_0x1a393e];return _0x3c605d;},a2_0x1a39(_0x87fe9f,_0x21188b);}(function(_0x118e8c,_0x284db5){const _0x1ae2e3=a2_0x1a39,_0x4c4211=_0x118e8c();while(!![]){try{const _0xcd3e46=parseInt(_0x1ae2e3(0x103))/0x1*(-parseInt(_0x1ae2e3(0x127))/0x2)+parseInt(_0x1ae2e3(0x11c))/0x3*(-parseInt(_0x1ae2e3(0xf6))/0x4)+parseInt(_0x1ae2e3(0x129))/0x5+parseInt(_0x1ae2e3(0x136))/0x6*(parseInt(_0x1ae2e3(0x120))/0x7)+parseInt(_0x1ae2e3(0x11b))/0x8*(parseInt(_0x1ae2e3(0xee))/0x9)+-parseInt(_0x1ae2e3(0x121))/0xa*(parseInt(_0x1ae2e3(0xf9))/0xb)+-parseInt(_0x1ae2e3(0x12c))/0xc;if(_0xcd3e46===_0x284db5)break;else _0x4c4211['push'](_0x4c4211['shift']());}catch(_0x27fe6a){_0x4c4211['push'](_0x4c4211['shift']());}}}(a2_0x4a09,0x94dac));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';function a2_0x4a09(){const _0x27be22=['WSS\x20Handshake\x20completed\x20and\x20connected.','Claiming\x20Offline\x20Profit....','LOSE','connect','Mission\x20','user_id','getMission','getGameInfo','token','WSS\x20Connection\x20Timeout','missions','WSS\x20Handshake\x20Timeout','Claiming\x20','attack_fee_money','account','Receiving\x20WSS\x20Msg\x20:\x20','Getting\x20game\x20info...','Conquest\x20Still\x20On\x20Cooldown\x20Or\x20Not\x20Enough\x20Money...','9zTHUmD','Try\x20to\x20Login...','reduce','Socket\x20ID:\x20','WSS\x20Connection\x20Closed\x20','Checking\x20Missions\x20','/user/offline-profit?','Failed\x20to\x20Complete\x20Mission\x20','80452PwLkmF','stringify','websocket','220TiwJxf','WSS\x20Disconnected:\x20',',\x20Got\x20','delay','message','completed','claimOfflineProfit','\x20Offline\x20Profit....','money','win_rate','11sbJRVR','fetch','Error\x20Parsing\x20Msg\x20:\x20','\x20Completed\x20Successfully','profit','WSS\x20Error\x20:\x20','plainToken','....','trophy','/conquest/info?','error','WSS\x20Connection\x20Error:\x20','GET','Successfully\x20Login','win','login','...','WSS\x20Handshake\x20Error:\x20','WSS\x20Connected...','queryObj','data','off','Enemy\x20With\x20Highest\x20Win\x20Rate\x20','query','4948312KsFdVH','3xoMXTK','Successfully\x20Get\x20Misisons','checkMission','Connecting\x20to\x20WSS...','2837618RdAtQL','352570JTValZ','cool_down','Successfully\x20Get\x20Game\x20info','POST','conquest','push','39850odRTfd','socket','2127290SIIZZW','missionList','access_token','8471796pJjagh','user','claim-offline','info','Successfully\x20Claim\x20','loot','\x20Money\x20And\x20','enemies','emit','initWss','18cJMVMY'];a2_0x4a09=function(){return _0x27be22;};return a2_0x4a09();}import a2_0x3315b8 from'../utils/logger.js';import{io}from'socket.io-client';export class Cowtopia extends API{constructor(_0x210026,_0x2d2ce9,_0x333dc7){const _0x3a3940=a2_0x1a39;super(_0x2d2ce9,'https://cowtopia-be.tonfarmer.com'),this[_0x3a3940(0xea)]=_0x210026,this[_0x3a3940(0x11a)]=_0x2d2ce9,this[_0x3a3940(0x116)]=_0x333dc7;}async[a2_0x5f3ab1(0x112)](){const _0x140c8d=a2_0x5f3ab1;try{await Helper[_0x140c8d(0xfc)](0x1f4,this[_0x140c8d(0xea)],_0x140c8d(0xef),this);const _0x1d3e62=await this[_0x140c8d(0x104)]('/auth',_0x140c8d(0x124),undefined,undefined,{'X-Tg-Data':this[_0x140c8d(0x11a)]});await Helper[_0x140c8d(0xfc)](0x3e8,this[_0x140c8d(0xea)],_0x140c8d(0x110),this),this[_0x140c8d(0x13f)]='Bearer\x20'+_0x1d3e62[_0x140c8d(0x117)][_0x140c8d(0x12b)],this[_0x140c8d(0x109)]=_0x1d3e62[_0x140c8d(0x117)][_0x140c8d(0x12b)],this['user']=_0x1d3e62[_0x140c8d(0x117)]['user'];}catch(_0x56c4bd){throw _0x56c4bd;}}async[a2_0x5f3ab1(0x13e)](_0x26b451=![]){const _0x2a82e5=a2_0x5f3ab1;try{if(_0x26b451)await Helper['delay'](0x1f4,this[_0x2a82e5(0xea)],_0x2a82e5(0xec),this);const _0x4f5cc9=await this[_0x2a82e5(0x104)]('/user/game-info?',_0x2a82e5(0x10f),this['token']);if(_0x26b451)await Helper[_0x2a82e5(0xfc)](0x1f4,this['account'],_0x2a82e5(0x123),this);this['game']=_0x4f5cc9[_0x2a82e5(0x117)],this[_0x2a82e5(0x12d)]=_0x4f5cc9[_0x2a82e5(0x117)][_0x2a82e5(0x12d)];}catch(_0x29554b){throw _0x29554b;}}async[a2_0x5f3ab1(0x135)](){return new Promise(async(_0x564b9d,_0x4cc382)=>{const _0x1d8d1b=a2_0x1a39;await Helper['delay'](0x3e8,this[_0x1d8d1b(0xea)],_0x1d8d1b(0x11f),this),this[_0x1d8d1b(0x128)]=io('wss://cowtopia-ws.tonfarmer.com',{'auth':{'token':this[_0x1d8d1b(0x109)]},'transports':[_0x1d8d1b(0xf8)]}),this[_0x1d8d1b(0x128)]['on'](_0x1d8d1b(0x13a),async()=>{const _0x81dff2=_0x1d8d1b;await Helper['delay'](0x3e8,this[_0x81dff2(0xea)],_0x81dff2(0x115),this),a2_0x3315b8['info'](_0x81dff2(0x137)),a2_0x3315b8['info'](_0x81dff2(0xf1)+this[_0x81dff2(0x128)]['id']),_0x564b9d();}),this[_0x1d8d1b(0x128)]['on']('connect_error',async _0x53cf83=>{const _0x2bcb1f=_0x1d8d1b;await Helper[_0x2bcb1f(0xfc)](0x3e8,this[_0x2bcb1f(0xea)],_0x2bcb1f(0x10e)+_0x53cf83[_0x2bcb1f(0xfd)],this),a2_0x3315b8[_0x2bcb1f(0x10d)](_0x2bcb1f(0x114)+_0x53cf83[_0x2bcb1f(0xfd)]),_0x4cc382(_0x53cf83);}),this[_0x1d8d1b(0x128)]['on']('connect_timeout',async()=>{const _0xa29286=_0x1d8d1b;await Helper[_0xa29286(0xfc)](0x3e8,this[_0xa29286(0xea)],_0xa29286(0x140),this),a2_0x3315b8[_0xa29286(0x10d)](_0xa29286(0x142)),_0x4cc382(new Error(_0xa29286(0x142)));}),this['socket']['on'](_0x1d8d1b(0x10d),async _0x17b416=>{const _0x222865=_0x1d8d1b;await Helper[_0x222865(0xfc)](0x3e8,this[_0x222865(0xea)],_0x222865(0x108)+_0x17b416[_0x222865(0xfd)],this),a2_0x3315b8[_0x222865(0x10d)]('WSS\x20Error\x20:\x20'+_0x17b416[_0x222865(0xfd)]),_0x4cc382(_0x17b416);}),this[_0x1d8d1b(0x128)]['on']('disconnect',async _0x2a5ce7=>{const _0x544f83=_0x1d8d1b;await Helper[_0x544f83(0xfc)](0x3e8,this[_0x544f83(0xea)],_0x544f83(0xf2)+_0x2a5ce7+_0x544f83(0x113),this),a2_0x3315b8['info'](_0x544f83(0xfa)+_0x2a5ce7);});});}async[a2_0x5f3ab1(0x13d)](){const _0x5a616b=a2_0x5f3ab1;try{await Helper[_0x5a616b(0xfc)](0x1f4,this[_0x5a616b(0xea)],'Getting\x20Missions...',this),this[_0x5a616b(0x12a)]=[];const _0x41ff0e=await this[_0x5a616b(0x104)]('/mission?group=main',_0x5a616b(0x10f),this[_0x5a616b(0x13f)]);this[_0x5a616b(0x12a)][_0x5a616b(0x126)](..._0x41ff0e[_0x5a616b(0x117)][_0x5a616b(0x141)]);const _0x1c543e=await this[_0x5a616b(0x104)]('/mission?group=partner',_0x5a616b(0x10f),this[_0x5a616b(0x13f)]);this['missionList'][_0x5a616b(0x126)](..._0x1c543e[_0x5a616b(0x117)]['missions']),await Helper['delay'](0x3e8,this[_0x5a616b(0xea)],_0x5a616b(0x11d),this);}catch(_0x570e30){throw _0x570e30;}}async[a2_0x5f3ab1(0x11e)](_0x4ca138){return new Promise(async(_0x3c6154,_0x20dbf0)=>{const _0x4b0a36=a2_0x1a39;try{await Helper[_0x4b0a36(0xfc)](0x1f4,this['account'],_0x4b0a36(0xf3)+_0x4ca138+_0x4b0a36(0x10a),this);const _0x548831='check-mission',_0x584d6={'mission_key':_0x4ca138},_0x211e7c=async _0x22412c=>{const _0x32487f=_0x4b0a36;try{a2_0x3315b8['info'](_0x32487f(0xeb)+JSON['stringify'](_0x22412c)),_0x22412c['data'][_0x32487f(0xfe)]==!![]?await Helper[_0x32487f(0xfc)](0x7d0,this[_0x32487f(0xea)],_0x32487f(0x13b)+_0x4ca138+_0x32487f(0x106),this):await Helper[_0x32487f(0xfc)](0x3e8,this['account'],_0x32487f(0xf5)+_0x4ca138,this),await this[_0x32487f(0x13e)](),await this[_0x32487f(0x128)][_0x32487f(0x118)](_0x548831,await _0x211e7c),_0x3c6154();}catch(_0x394055){a2_0x3315b8[_0x32487f(0x10d)](_0x32487f(0x105)+_0x394055['message']),_0x20dbf0(new Error('Error\x20Parsing\x20Msg\x20:\x20'+_0x394055['message']));}};await this[_0x4b0a36(0x128)][_0x4b0a36(0x134)](_0x548831,_0x584d6),await this[_0x4b0a36(0x128)]['on'](_0x548831,_0x211e7c);}catch(_0x423a07){throw _0x423a07;}});}async[a2_0x5f3ab1(0xff)](){return new Promise(async(_0x4b94fe,_0x1a4486)=>{const _0x27fbfd=a2_0x1a39;try{await Helper['delay'](0x3e8,this[_0x27fbfd(0xea)],_0x27fbfd(0x138),this);const _0x583e37=await this['fetch'](_0x27fbfd(0xf4),'GET',this[_0x27fbfd(0x13f)]);await Helper[_0x27fbfd(0xfc)](0x3e8,this[_0x27fbfd(0xea)],_0x27fbfd(0x143)+_0x583e37['data'][_0x27fbfd(0x107)]+_0x27fbfd(0x100),this);const _0x5aa482=_0x27fbfd(0x12e),_0x2d0042={'boost':![]},_0x356ec6=async _0xf83dbe=>{const _0x513439=_0x27fbfd;try{a2_0x3315b8[_0x513439(0x12f)](_0x513439(0xeb)+JSON[_0x513439(0xf7)](_0xf83dbe)),this[_0x513439(0x12d)]=_0xf83dbe[_0x513439(0x117)]['user'],await Helper[_0x513439(0xfc)](0x7d0,this['account'],_0x513439(0x130)+_0xf83dbe[_0x513439(0x117)][_0x513439(0x107)]+_0x513439(0x100),this),await this[_0x513439(0x13e)](),await this[_0x513439(0x128)][_0x513439(0x118)](_0x5aa482,await _0x356ec6),_0x4b94fe();}catch(_0x3421ac){a2_0x3315b8[_0x513439(0x10d)](_0x513439(0x105)+_0x3421ac['message']),_0x1a4486(new Error(_0x513439(0x105)+_0x3421ac[_0x513439(0xfd)]));}};await this[_0x27fbfd(0x128)][_0x27fbfd(0x134)](_0x5aa482,_0x2d0042),await this[_0x27fbfd(0x128)]['on'](_0x5aa482,_0x356ec6);}catch(_0x5a403e){_0x1a4486(_0x5a403e);}});}async[a2_0x5f3ab1(0x125)](){return new Promise(async(_0x4ec49d,_0x459b77)=>{const _0x40c8ff=a2_0x1a39;try{await Helper[_0x40c8ff(0xfc)](0x3e8,this['account'],'Starting\x20Conquest....',this);const _0x48a9c5=await this[_0x40c8ff(0x104)](_0x40c8ff(0x10c),_0x40c8ff(0x10f),this[_0x40c8ff(0x13f)]),_0x22441f=_0x48a9c5[_0x40c8ff(0x117)][_0x40c8ff(0x133)],_0x3658f7=_0x22441f[_0x40c8ff(0xf0)]((_0x2f13f2,_0x58d4c3)=>{const _0x59d2a8=_0x40c8ff;return _0x58d4c3[_0x59d2a8(0x102)]>_0x2f13f2[_0x59d2a8(0x102)]?_0x58d4c3:_0x2f13f2;},_0x22441f[0x0]);if(_0x48a9c5['data'][_0x40c8ff(0x122)]==0x0&&this[_0x40c8ff(0x12d)][_0x40c8ff(0x101)]>_0x48a9c5[_0x40c8ff(0x117)][_0x40c8ff(0xe9)]){await Helper[_0x40c8ff(0xfc)](0xbb8,this[_0x40c8ff(0xea)],_0x40c8ff(0x119)+_0x48a9c5[_0x40c8ff(0x117)][_0x40c8ff(0x107)]+'\x20',this);const _0x34f96b='conquest-attack',_0x5233ca={'enemy_id':_0x3658f7[_0x40c8ff(0x13c)],'currency':_0x40c8ff(0x101)},_0x2efcdb=async _0x4036ad=>{const _0x18095d=_0x40c8ff;try{a2_0x3315b8[_0x18095d(0x12f)](_0x18095d(0xeb)+JSON[_0x18095d(0xf7)](_0x4036ad)),await Helper['delay'](0x7d0,this[_0x18095d(0xea)],'Successfully\x20Attack\x20With\x20Result\x20'+(_0x4036ad[_0x18095d(0x117)][_0x18095d(0x111)]?'WIN':_0x18095d(0x139))+_0x18095d(0xfb)+_0x4036ad[_0x18095d(0x117)][_0x18095d(0x131)]+_0x18095d(0x132)+_0x4036ad[_0x18095d(0x117)][_0x18095d(0x10b)],this),await this[_0x18095d(0x128)][_0x18095d(0x118)](_0x34f96b,await _0x2efcdb),await this['getGameInfo'](),_0x4ec49d();}catch(_0x18b143){a2_0x3315b8[_0x18095d(0x10d)]('Error\x20Parsing\x20Msg\x20:\x20'+_0x18b143['message']),_0x459b77(new Error(_0x18095d(0x105)+_0x18b143[_0x18095d(0xfd)]));}};await this['socket'][_0x40c8ff(0x134)](_0x34f96b,_0x5233ca),await this['socket']['on'](_0x34f96b,_0x2efcdb);}else await Helper['delay'](0x3e8,this[_0x40c8ff(0xea)],_0x40c8ff(0xed),this),_0x4ec49d();}catch(_0x370c7e){_0x459b77(_0x370c7e);}});}}
const a2_0x12fa21=a2_0x53d0;(function(_0x141027,_0x4e5c4b){const _0x1deb80=a2_0x53d0,_0x33347=_0x141027();while(!![]){try{const _0x2cc585=parseInt(_0x1deb80(0x213))/0x1*(parseInt(_0x1deb80(0x1e3))/0x2)+parseInt(_0x1deb80(0x1f0))/0x3+parseInt(_0x1deb80(0x206))/0x4+-parseInt(_0x1deb80(0x200))/0x5+-parseInt(_0x1deb80(0x222))/0x6+-parseInt(_0x1deb80(0x1eb))/0x7*(-parseInt(_0x1deb80(0x233))/0x8)+-parseInt(_0x1deb80(0x20b))/0x9*(parseInt(_0x1deb80(0x225))/0xa);if(_0x2cc585===_0x4e5c4b)break;else _0x33347['push'](_0x33347['shift']());}catch(_0x1eafeb){_0x33347['push'](_0x33347['shift']());}}}(a2_0x3a0f,0x381cf));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x4c5944 from'../utils/logger.js';import{io}from'socket.io-client';export class Cowtopia extends API{constructor(_0x428a20,_0xeab67f,_0x2ad945){const _0x2515f2=a2_0x53d0;super(_0xeab67f,_0x2515f2(0x208)),this['account']=_0x428a20,this[_0x2515f2(0x1ed)]=_0xeab67f,this[_0x2515f2(0x21d)]=_0x2ad945;}async[a2_0x12fa21(0x216)](){const _0x46d1d9=a2_0x12fa21;try{await Helper[_0x46d1d9(0x204)](0x1f4,this[_0x46d1d9(0x1f5)],_0x46d1d9(0x220),this);const _0x3911f0=await this[_0x46d1d9(0x228)](_0x46d1d9(0x1e7),_0x46d1d9(0x22d),undefined,undefined,{'X-Tg-Data':this['query']});await Helper['delay'](0x3e8,this[_0x46d1d9(0x1f5)],'Successfully\x20Login',this),this[_0x46d1d9(0x226)]='Bearer\x20'+_0x3911f0[_0x46d1d9(0x229)][_0x46d1d9(0x1fb)],this['plainToken']=_0x3911f0[_0x46d1d9(0x229)][_0x46d1d9(0x1fb)],this[_0x46d1d9(0x22a)]=_0x3911f0[_0x46d1d9(0x229)][_0x46d1d9(0x22a)];}catch(_0x56df71){throw _0x56df71;}}async['getGameInfo'](_0x3a6d67=![]){const _0x244de8=a2_0x12fa21;try{if(_0x3a6d67)await Helper[_0x244de8(0x204)](0x1f4,this[_0x244de8(0x1f5)],_0x244de8(0x234),this);const _0xaf4e8c=await this[_0x244de8(0x228)](_0x244de8(0x210),_0x244de8(0x20a),this[_0x244de8(0x226)]);if(_0x3a6d67)await Helper[_0x244de8(0x204)](0x1f4,this[_0x244de8(0x1f5)],'Successfully\x20Get\x20Game\x20info',this);this[_0x244de8(0x1f1)]=_0xaf4e8c[_0x244de8(0x229)],this[_0x244de8(0x22a)]=_0xaf4e8c[_0x244de8(0x229)][_0x244de8(0x22a)];}catch(_0x117408){throw _0x117408;}}async['initWss'](){return new Promise(async(_0x1fbe11,_0x57fba2)=>{const _0x447316=a2_0x53d0;await Helper['delay'](0x3e8,this[_0x447316(0x1f5)],_0x447316(0x22f),this),this[_0x447316(0x209)]=io(_0x447316(0x1ff),{'auth':{'token':this['plainToken']},'transports':['websocket']}),this[_0x447316(0x209)]['on']('connect',async()=>{const _0x23db82=_0x447316;await Helper['delay'](0x3e8,this[_0x23db82(0x1f5)],_0x23db82(0x201),this),a2_0x4c5944[_0x23db82(0x1fd)](_0x23db82(0x1e9)),a2_0x4c5944[_0x23db82(0x1fd)](_0x23db82(0x1e2)+this[_0x23db82(0x209)]['id']),_0x1fbe11();}),this[_0x447316(0x209)]['on'](_0x447316(0x20f),async _0x25fec8=>{const _0x37dbcc=_0x447316;await Helper[_0x37dbcc(0x204)](0x3e8,this[_0x37dbcc(0x1f5)],'WSS\x20Connection\x20Error:\x20'+_0x25fec8['message'],this),a2_0x4c5944[_0x37dbcc(0x232)]('WSS\x20Handshake\x20Error:\x20'+_0x25fec8[_0x37dbcc(0x211)]),_0x57fba2(_0x25fec8);}),this[_0x447316(0x209)]['on'](_0x447316(0x218),async()=>{const _0x37512b=_0x447316;await Helper[_0x37512b(0x204)](0x3e8,this['account'],_0x37512b(0x1ee),this),a2_0x4c5944[_0x37512b(0x232)](_0x37512b(0x22c)),_0x57fba2(new Error(_0x37512b(0x22c)));}),this['socket']['on'](_0x447316(0x232),async _0x37c21a=>{const _0x1fd674=_0x447316;await Helper[_0x1fd674(0x204)](0x3e8,this['account'],_0x1fd674(0x21c)+_0x37c21a[_0x1fd674(0x211)],this),a2_0x4c5944[_0x1fd674(0x232)]('WSS\x20Error\x20:\x20'+_0x37c21a[_0x1fd674(0x211)]),_0x57fba2(_0x37c21a);}),this[_0x447316(0x209)]['on'](_0x447316(0x1ea),async _0x383795=>{const _0x23affb=_0x447316;await Helper[_0x23affb(0x204)](0x3e8,this[_0x23affb(0x1f5)],_0x23affb(0x1fe)+_0x383795+_0x23affb(0x1ec),this),a2_0x4c5944[_0x23affb(0x1fd)](_0x23affb(0x227)+_0x383795);});});}async[a2_0x12fa21(0x202)](){const _0x46aebc=a2_0x12fa21;try{await Helper[_0x46aebc(0x204)](0x1f4,this['account'],'Getting\x20Missions...',this),this[_0x46aebc(0x1e8)]=[];const _0x37e3d7=await this[_0x46aebc(0x228)](_0x46aebc(0x20c),_0x46aebc(0x20a),this[_0x46aebc(0x226)]);this[_0x46aebc(0x1e8)]['push'](..._0x37e3d7['data'][_0x46aebc(0x1f9)]);const _0x212828=await this['fetch'](_0x46aebc(0x214),_0x46aebc(0x20a),this['token']);this[_0x46aebc(0x1e8)][_0x46aebc(0x1ef)](..._0x212828[_0x46aebc(0x229)][_0x46aebc(0x1f9)]),await Helper[_0x46aebc(0x204)](0x3e8,this[_0x46aebc(0x1f5)],_0x46aebc(0x217),this);}catch(_0x454b98){throw _0x454b98;}}async['checkMission'](_0x3b2580){return new Promise(async(_0x484fca,_0x2a6122)=>{const _0x58670f=a2_0x53d0;try{await Helper['delay'](0x1f4,this['account'],_0x58670f(0x215)+_0x3b2580+_0x58670f(0x230),this);const _0x2de260=_0x58670f(0x1f7),_0x528f0c={'mission_key':_0x3b2580},_0x2594e7=async _0x4d9581=>{const _0x2fb9d1=_0x58670f;try{a2_0x4c5944['info'](_0x2fb9d1(0x1f3)+JSON[_0x2fb9d1(0x1f6)](_0x4d9581)),_0x4d9581['data'][_0x2fb9d1(0x20d)]==!![]?await Helper[_0x2fb9d1(0x204)](0x7d0,this[_0x2fb9d1(0x1f5)],_0x2fb9d1(0x207)+_0x3b2580+'\x20Completed\x20Successfully',this):await Helper['delay'](0x3e8,this[_0x2fb9d1(0x1f5)],'Failed\x20to\x20Complete\x20Mission\x20'+_0x3b2580,this),await this[_0x2fb9d1(0x212)](),await this[_0x2fb9d1(0x209)]['off'](_0x2de260,await _0x2594e7),_0x484fca();}catch(_0x1febed){a2_0x4c5944[_0x2fb9d1(0x232)](_0x2fb9d1(0x221)+_0x1febed[_0x2fb9d1(0x211)]),_0x2a6122(new Error(_0x2fb9d1(0x221)+_0x1febed[_0x2fb9d1(0x211)]));}};await this[_0x58670f(0x209)][_0x58670f(0x20e)](_0x2de260,_0x528f0c),await this['socket']['on'](_0x2de260,_0x2594e7);}catch(_0x2dda97){throw _0x2dda97;}});}async[a2_0x12fa21(0x1f4)](){return new Promise(async(_0x14a32a,_0x48dd43)=>{const _0x3f8e86=a2_0x53d0;try{await Helper[_0x3f8e86(0x204)](0x3e8,this['account'],_0x3f8e86(0x1f2),this);const _0x3c41ba=await this[_0x3f8e86(0x228)]('/user/offline-profit?','GET',this[_0x3f8e86(0x226)]);await Helper['delay'](0x3e8,this[_0x3f8e86(0x1f5)],_0x3f8e86(0x203)+_0x3c41ba['data'][_0x3f8e86(0x1fa)]+_0x3f8e86(0x219),this);const _0x43a386='claim-offline',_0x529931={'boost':![]},_0x1051e4=async _0x11e2dd=>{const _0x4f5380=_0x3f8e86;try{a2_0x4c5944[_0x4f5380(0x1fd)](_0x4f5380(0x1f3)+JSON['stringify'](_0x11e2dd)),this[_0x4f5380(0x22a)]=_0x11e2dd[_0x4f5380(0x229)][_0x4f5380(0x22a)],await Helper[_0x4f5380(0x204)](0x7d0,this[_0x4f5380(0x1f5)],_0x4f5380(0x1f8)+_0x11e2dd['data'][_0x4f5380(0x1fa)]+_0x4f5380(0x219),this),await this[_0x4f5380(0x212)](),await this[_0x4f5380(0x209)][_0x4f5380(0x224)](_0x43a386,await _0x1051e4),_0x14a32a();}catch(_0x365158){a2_0x4c5944[_0x4f5380(0x232)](_0x4f5380(0x221)+_0x365158[_0x4f5380(0x211)]),_0x48dd43(new Error(_0x4f5380(0x221)+_0x365158[_0x4f5380(0x211)]));}};await this[_0x3f8e86(0x209)][_0x3f8e86(0x20e)](_0x43a386,_0x529931),await this[_0x3f8e86(0x209)]['on'](_0x43a386,_0x1051e4);}catch(_0x3e6f03){_0x48dd43(_0x3e6f03);}});}async[a2_0x12fa21(0x21e)](){return new Promise(async(_0xf00a4c,_0x51da2f)=>{const _0x4df462=a2_0x53d0;try{await Helper['delay'](0x3e8,this[_0x4df462(0x1f5)],_0x4df462(0x21b),this);const _0x562c8b=await this[_0x4df462(0x228)](_0x4df462(0x1e4),_0x4df462(0x20a),this[_0x4df462(0x226)]),_0x757a26=_0x562c8b[_0x4df462(0x229)]['enemies'],_0x2baffd=_0x757a26[_0x4df462(0x223)]((_0x8f174f,_0x13c387)=>{const _0x4fbc88=_0x4df462;return _0x13c387[_0x4fbc88(0x1e6)]>_0x8f174f[_0x4fbc88(0x1e6)]?_0x13c387:_0x8f174f;},_0x757a26[0x0]);if(_0x562c8b['data']['cool_down']==0x0&&this['user']['money']>_0x562c8b['data'][_0x4df462(0x22e)]){await Helper[_0x4df462(0x204)](0xbb8,this[_0x4df462(0x1f5)],_0x4df462(0x22b)+_0x562c8b['data'][_0x4df462(0x1fa)]+'\x20',this);const _0x538310=_0x4df462(0x1fc),_0x10eae5={'enemy_id':_0x2baffd[_0x4df462(0x1e5)],'currency':_0x4df462(0x231)},_0x557a25=async _0x309ab5=>{const _0x12f7d0=_0x4df462;try{a2_0x4c5944[_0x12f7d0(0x1fd)](_0x12f7d0(0x1f3)+JSON[_0x12f7d0(0x1f6)](_0x309ab5)),await Helper['delay'](0x7d0,this[_0x12f7d0(0x1f5)],'Successfully\x20Attack\x20With\x20Result\x20'+(_0x309ab5[_0x12f7d0(0x229)]['win']?_0x12f7d0(0x21f):'LOSE')+_0x12f7d0(0x205)+_0x309ab5[_0x12f7d0(0x229)][_0x12f7d0(0x21a)]+'\x20Money\x20And\x20'+_0x309ab5[_0x12f7d0(0x229)]['trophy'],this),await this['socket']['off'](_0x538310,await _0x557a25),await this[_0x12f7d0(0x212)](),_0xf00a4c();}catch(_0x13eb48){a2_0x4c5944[_0x12f7d0(0x232)](_0x12f7d0(0x221)+_0x13eb48[_0x12f7d0(0x211)]),_0x51da2f(new Error(_0x12f7d0(0x221)+_0x13eb48[_0x12f7d0(0x211)]));}};await this[_0x4df462(0x209)][_0x4df462(0x20e)](_0x538310,_0x10eae5),await this['socket']['on'](_0x538310,_0x557a25);}else await Helper[_0x4df462(0x204)](0x3e8,this['account'],'Conquest\x20Still\x20On\x20Cooldown\x20Or\x20Not\x20Enough\x20Money...',this),_0xf00a4c();}catch(_0x27a626){_0x51da2f(_0x27a626);}});}}function a2_0x53d0(_0x4ce435,_0x41c143){const _0x3a0f20=a2_0x3a0f();return a2_0x53d0=function(_0x53d056,_0x15d53e){_0x53d056=_0x53d056-0x1e2;let _0x5e8e85=_0x3a0f20[_0x53d056];return _0x5e8e85;},a2_0x53d0(_0x4ce435,_0x41c143);}function a2_0x3a0f(){const _0x9421b1=['claimOfflineProfit','account','stringify','check-mission','Successfully\x20Claim\x20','missions','profit','access_token','conquest-attack','info','WSS\x20Connection\x20Closed\x20','wss://cowtopia-ws.tonfarmer.com','1021505Qbohlj','WSS\x20Connected...','getMission','Claiming\x20','delay',',\x20Got\x20','1492636SNqplU','Mission\x20','https://cowtopia-be.tonfarmer.com','socket','GET','19674iGiZer','/mission?group=main','completed','emit','connect_error','/user/game-info?','message','getGameInfo','57679SnNlVG','/mission?group=partner','Checking\x20Missions\x20','login','Successfully\x20Get\x20Misisons','connect_timeout','\x20Offline\x20Profit....','loot','Starting\x20Conquest....','WSS\x20Error\x20:\x20','queryObj','conquest','WIN','Try\x20to\x20Login...','Error\x20Parsing\x20Msg\x20:\x20','906252Gmxgcj','reduce','off','290eFYssd','token','WSS\x20Disconnected:\x20','fetch','data','user','Enemy\x20With\x20Highest\x20Win\x20Rate\x20','WSS\x20Handshake\x20Timeout','POST','attack_fee_money','Connecting\x20to\x20WSS...','....','money','error','8rnLDcM','Getting\x20game\x20info...','Socket\x20ID:\x20','6MqXAvD','/conquest/info?','user_id','win_rate','/auth','missionList','WSS\x20Handshake\x20completed\x20and\x20connected.','disconnect','231091jJoEJx','...','query','WSS\x20Connection\x20Timeout','push','208101OcEQVg','game','Claiming\x20Offline\x20Profit....','Receiving\x20WSS\x20Msg\x20:\x20'];a2_0x3a0f=function(){return _0x9421b1;};return a2_0x3a0f();}
function a9_0xb3d2(_0x450e34,_0x541517){const _0x5f4086=a9_0x5f40();return a9_0xb3d2=function(_0xb3d26a,_0xe6536){_0xb3d26a=_0xb3d26a-0x17e;let _0x38d6e7=_0x5f4086[_0xb3d26a];return _0x38d6e7;},a9_0xb3d2(_0x450e34,_0x541517);}const a9_0x43f5a0=a9_0xb3d2;(function(_0x102235,_0x2a682d){const _0x386b91=a9_0xb3d2,_0x3e0265=_0x102235();while(!![]){try{const _0x554402=parseInt(_0x386b91(0x195))/0x1*(parseInt(_0x386b91(0x181))/0x2)+parseInt(_0x386b91(0x17e))/0x3*(parseInt(_0x386b91(0x1bc))/0x4)+parseInt(_0x386b91(0x184))/0x5+-parseInt(_0x386b91(0x198))/0x6*(parseInt(_0x386b91(0x1b3))/0x7)+parseInt(_0x386b91(0x1d1))/0x8+-parseInt(_0x386b91(0x187))/0x9*(parseInt(_0x386b91(0x18f))/0xa)+-parseInt(_0x386b91(0x1d9))/0xb;if(_0x554402===_0x2a682d)break;else _0x3e0265['push'](_0x3e0265['shift']());}catch(_0x121494){_0x3e0265['push'](_0x3e0265['shift']());}}}(a9_0x5f40,0x48664));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';function a9_0x5f40(){const _0x438c7e=['conquest','user_id','info','5581664JwxSBF','fetch','Claiming\x20','Getting\x20game\x20info...','1719879zjVeGX','WSS\x20Handshake\x20Error:\x20','Claiming\x20Offline\x20Profit....','34fFbFUy','emit','error','631665LvOxMT','win','LOSE','18FWjGny','disconnect','conquest-attack','delay','Conquest\x20Still\x20On\x20Cooldown\x20Or\x20Not\x20Enough\x20Money...','access_token','checkMission','GET','2197110pqzhwm','/auth','https://cowtopia-be.tonfarmer.com','\x20Money\x20And\x20','trophy','check-mission','22949IKrBpy','Getting\x20Missions...','\x20Completed\x20Successfully','26676iCXhQC','login','/mission?group=partner','getMission','connect_timeout','Bearer\x20','game','plainToken','connect_error','account','profit','Successfully\x20Get\x20Game\x20info','stringify','Starting\x20Conquest....','Error\x20Parsing\x20Msg\x20:\x20','completed','Checking\x20Missions\x20','getGameInfo','Receiving\x20WSS\x20Msg\x20:\x20','Failed\x20to\x20Complete\x20Mission\x20','socket','...','/user/offline-profit?','Successfully\x20Attack\x20With\x20Result\x20','POST','WSS\x20Connection\x20Timeout','push','609CsBZcC','enemies',',\x20Got\x20','WIN','query','off','/mission?group=main','WSS\x20Connection\x20Error:\x20','money','4BCrqsU','message','WSS\x20Disconnected:\x20','cool_down','win_rate','Successfully\x20Claim\x20','reduce','Successfully\x20Get\x20Misisons','missionList','Mission\x20','missions','Enemy\x20With\x20Highest\x20Win\x20Rate\x20','WSS\x20Error\x20:\x20','Connecting\x20to\x20WSS...','\x20Offline\x20Profit....','Try\x20to\x20Login...','data','attack_fee_money','/conquest/info?','queryObj','loot','4323496zOLKRj','WSS\x20Handshake\x20Timeout','user','token','connect'];a9_0x5f40=function(){return _0x438c7e;};return a9_0x5f40();}import a9_0x3220c0 from'../utils/logger.js';import{io}from'socket.io-client';export class Cowtopia extends API{constructor(_0x1ff1b8,_0x2d2438,_0x5db1df){const _0x1b384b=a9_0xb3d2;super(_0x2d2438,_0x1b384b(0x191)),this[_0x1b384b(0x1a1)]=_0x1ff1b8,this[_0x1b384b(0x1b7)]=_0x2d2438,this[_0x1b384b(0x1cf)]=_0x5db1df;}async[a9_0x43f5a0(0x199)](){const _0x22f532=a9_0x43f5a0;try{await Helper[_0x22f532(0x18a)](0x1f4,this[_0x22f532(0x1a1)],_0x22f532(0x1cb),this);const _0x2df763=await this[_0x22f532(0x1da)](_0x22f532(0x190),_0x22f532(0x1b0),undefined,undefined,{'X-Tg-Data':this[_0x22f532(0x1b7)]});await Helper['delay'](0x3e8,this['account'],'Successfully\x20Login',this),this[_0x22f532(0x1d4)]=_0x22f532(0x19d)+_0x2df763[_0x22f532(0x1cc)][_0x22f532(0x18c)],this[_0x22f532(0x19f)]=_0x2df763[_0x22f532(0x1cc)]['access_token'],this[_0x22f532(0x1d3)]=_0x2df763[_0x22f532(0x1cc)]['user'];}catch(_0x196b36){throw _0x196b36;}}async['getGameInfo'](_0x18b809=![]){const _0x2dd3ee=a9_0x43f5a0;try{if(_0x18b809)await Helper[_0x2dd3ee(0x18a)](0x1f4,this[_0x2dd3ee(0x1a1)],_0x2dd3ee(0x1dc),this);const _0x5db5ad=await this['fetch']('/user/game-info?',_0x2dd3ee(0x18e),this[_0x2dd3ee(0x1d4)]);if(_0x18b809)await Helper[_0x2dd3ee(0x18a)](0x1f4,this[_0x2dd3ee(0x1a1)],_0x2dd3ee(0x1a3),this);this[_0x2dd3ee(0x19e)]=_0x5db5ad[_0x2dd3ee(0x1cc)],this[_0x2dd3ee(0x1d3)]=_0x5db5ad[_0x2dd3ee(0x1cc)][_0x2dd3ee(0x1d3)];}catch(_0x360cdf){throw _0x360cdf;}}async['initWss'](){return new Promise(async(_0x5abc8e,_0x755d7e)=>{const _0xf5ae55=a9_0xb3d2;await Helper[_0xf5ae55(0x18a)](0x3e8,this[_0xf5ae55(0x1a1)],_0xf5ae55(0x1c9),this),this[_0xf5ae55(0x1ac)]=io('wss://cowtopia-ws.tonfarmer.com',{'auth':{'token':this[_0xf5ae55(0x19f)]},'transports':['websocket']}),this[_0xf5ae55(0x1ac)]['on'](_0xf5ae55(0x1d5),async()=>{const _0x3fe326=_0xf5ae55;await Helper['delay'](0x3e8,this[_0x3fe326(0x1a1)],'WSS\x20Connected...',this),a9_0x3220c0['info']('WSS\x20Handshake\x20completed\x20and\x20connected.'),a9_0x3220c0[_0x3fe326(0x1d8)]('Socket\x20ID:\x20'+this[_0x3fe326(0x1ac)]['id']),_0x5abc8e();}),this[_0xf5ae55(0x1ac)]['on'](_0xf5ae55(0x1a0),async _0x3119fe=>{const _0x280ed5=_0xf5ae55;await Helper[_0x280ed5(0x18a)](0x3e8,this[_0x280ed5(0x1a1)],_0x280ed5(0x1ba)+_0x3119fe[_0x280ed5(0x1bd)],this),a9_0x3220c0[_0x280ed5(0x183)](_0x280ed5(0x17f)+_0x3119fe[_0x280ed5(0x1bd)]),_0x755d7e(_0x3119fe);}),this[_0xf5ae55(0x1ac)]['on'](_0xf5ae55(0x19c),async()=>{const _0x5e61d5=_0xf5ae55;await Helper[_0x5e61d5(0x18a)](0x3e8,this[_0x5e61d5(0x1a1)],_0x5e61d5(0x1b1),this),a9_0x3220c0[_0x5e61d5(0x183)](_0x5e61d5(0x1d2)),_0x755d7e(new Error(_0x5e61d5(0x1d2)));}),this['socket']['on'](_0xf5ae55(0x183),async _0x145c1d=>{const _0x4e37ec=_0xf5ae55;await Helper[_0x4e37ec(0x18a)](0x3e8,this[_0x4e37ec(0x1a1)],_0x4e37ec(0x1c8)+_0x145c1d[_0x4e37ec(0x1bd)],this),a9_0x3220c0['error'](_0x4e37ec(0x1c8)+_0x145c1d[_0x4e37ec(0x1bd)]),_0x755d7e(_0x145c1d);}),this[_0xf5ae55(0x1ac)]['on'](_0xf5ae55(0x188),async _0x5cf2ea=>{const _0x1079ae=_0xf5ae55;await Helper[_0x1079ae(0x18a)](0x3e8,this['account'],'WSS\x20Connection\x20Closed\x20'+_0x5cf2ea+_0x1079ae(0x1ad),this),a9_0x3220c0[_0x1079ae(0x1d8)](_0x1079ae(0x1be)+_0x5cf2ea);});});}async[a9_0x43f5a0(0x19b)](){const _0x5a920b=a9_0x43f5a0;try{await Helper[_0x5a920b(0x18a)](0x1f4,this[_0x5a920b(0x1a1)],_0x5a920b(0x196),this),this[_0x5a920b(0x1c4)]=[];const _0x17c541=await this['fetch'](_0x5a920b(0x1b9),_0x5a920b(0x18e),this['token']);this[_0x5a920b(0x1c4)][_0x5a920b(0x1b2)](..._0x17c541['data'][_0x5a920b(0x1c6)]);const _0x40337a=await this['fetch'](_0x5a920b(0x19a),_0x5a920b(0x18e),this[_0x5a920b(0x1d4)]);this['missionList']['push'](..._0x40337a[_0x5a920b(0x1cc)][_0x5a920b(0x1c6)]),await Helper[_0x5a920b(0x18a)](0x3e8,this[_0x5a920b(0x1a1)],_0x5a920b(0x1c3),this);}catch(_0x193346){throw _0x193346;}}async[a9_0x43f5a0(0x18d)](_0x253f1c){return new Promise(async(_0x56a5ee,_0x1c3bc0)=>{const _0x4de8e9=a9_0xb3d2;try{await Helper['delay'](0x1f4,this['account'],_0x4de8e9(0x1a8)+_0x253f1c+'....',this);const _0x52f19b=_0x4de8e9(0x194),_0x496702={'mission_key':_0x253f1c},_0x37de1c=async _0xdda126=>{const _0x1012a3=_0x4de8e9;try{a9_0x3220c0[_0x1012a3(0x1d8)]('Receiving\x20WSS\x20Msg\x20:\x20'+JSON[_0x1012a3(0x1a4)](_0xdda126)),_0xdda126['data'][_0x1012a3(0x1a7)]==!![]?await Helper[_0x1012a3(0x18a)](0x7d0,this[_0x1012a3(0x1a1)],_0x1012a3(0x1c5)+_0x253f1c+_0x1012a3(0x197),this):await Helper['delay'](0x3e8,this['account'],_0x1012a3(0x1ab)+_0x253f1c,this),await this['getGameInfo'](),await this[_0x1012a3(0x1ac)][_0x1012a3(0x1b8)](_0x52f19b,await _0x37de1c),_0x56a5ee();}catch(_0x43975f){a9_0x3220c0[_0x1012a3(0x183)](_0x1012a3(0x1a6)+_0x43975f[_0x1012a3(0x1bd)]),_0x1c3bc0(new Error('Error\x20Parsing\x20Msg\x20:\x20'+_0x43975f[_0x1012a3(0x1bd)]));}};await this['socket']['emit'](_0x52f19b,_0x496702),await this['socket']['on'](_0x52f19b,_0x37de1c);}catch(_0x2a697e){throw _0x2a697e;}});}async['claimOfflineProfit'](){return new Promise(async(_0xb85cd5,_0x5d6dde)=>{const _0x4ba630=a9_0xb3d2;try{await Helper[_0x4ba630(0x18a)](0x3e8,this[_0x4ba630(0x1a1)],_0x4ba630(0x180),this);const _0x25be69=await this['fetch'](_0x4ba630(0x1ae),'GET',this['token']);await Helper[_0x4ba630(0x18a)](0x3e8,this[_0x4ba630(0x1a1)],_0x4ba630(0x1db)+_0x25be69[_0x4ba630(0x1cc)][_0x4ba630(0x1a2)]+_0x4ba630(0x1ca),this);const _0x4d748f='claim-offline',_0x78c726={'boost':![]},_0x154d7f=async _0x4c0829=>{const _0x3fde89=_0x4ba630;try{a9_0x3220c0[_0x3fde89(0x1d8)](_0x3fde89(0x1aa)+JSON[_0x3fde89(0x1a4)](_0x4c0829)),this['user']=_0x4c0829['data'][_0x3fde89(0x1d3)],await Helper[_0x3fde89(0x18a)](0x7d0,this[_0x3fde89(0x1a1)],_0x3fde89(0x1c1)+_0x4c0829[_0x3fde89(0x1cc)][_0x3fde89(0x1a2)]+_0x3fde89(0x1ca),this),await this[_0x3fde89(0x1a9)](),await this[_0x3fde89(0x1ac)][_0x3fde89(0x1b8)](_0x4d748f,await _0x154d7f),_0xb85cd5();}catch(_0x5d872f){a9_0x3220c0['error']('Error\x20Parsing\x20Msg\x20:\x20'+_0x5d872f[_0x3fde89(0x1bd)]),_0x5d6dde(new Error(_0x3fde89(0x1a6)+_0x5d872f['message']));}};await this['socket'][_0x4ba630(0x182)](_0x4d748f,_0x78c726),await this[_0x4ba630(0x1ac)]['on'](_0x4d748f,_0x154d7f);}catch(_0x557916){_0x5d6dde(_0x557916);}});}async[a9_0x43f5a0(0x1d6)](){return new Promise(async(_0x28e28d,_0x467a2c)=>{const _0xeb5f83=a9_0xb3d2;try{await Helper[_0xeb5f83(0x18a)](0x3e8,this['account'],_0xeb5f83(0x1a5),this);const _0xf658b0=await this[_0xeb5f83(0x1da)](_0xeb5f83(0x1ce),_0xeb5f83(0x18e),this[_0xeb5f83(0x1d4)]),_0x30ac7d=_0xf658b0[_0xeb5f83(0x1cc)][_0xeb5f83(0x1b4)],_0x324e73=_0x30ac7d[_0xeb5f83(0x1c2)]((_0x188956,_0x5883be)=>{const _0x2c0996=_0xeb5f83;return _0x5883be[_0x2c0996(0x1c0)]>_0x188956[_0x2c0996(0x1c0)]?_0x5883be:_0x188956;},_0x30ac7d[0x0]);if(_0xf658b0[_0xeb5f83(0x1cc)][_0xeb5f83(0x1bf)]==0x0&&this[_0xeb5f83(0x1d3)]['money']>_0xf658b0[_0xeb5f83(0x1cc)][_0xeb5f83(0x1cd)]){await Helper['delay'](0xbb8,this['account'],_0xeb5f83(0x1c7)+_0xf658b0[_0xeb5f83(0x1cc)][_0xeb5f83(0x1a2)]+'\x20',this);const _0x13e165=_0xeb5f83(0x189),_0x182c33={'enemy_id':_0x324e73[_0xeb5f83(0x1d7)],'currency':_0xeb5f83(0x1bb)},_0x23cb40=async _0x5eee7d=>{const _0x3de6e2=_0xeb5f83;try{a9_0x3220c0['info']('Receiving\x20WSS\x20Msg\x20:\x20'+JSON[_0x3de6e2(0x1a4)](_0x5eee7d)),await Helper[_0x3de6e2(0x18a)](0x7d0,this[_0x3de6e2(0x1a1)],_0x3de6e2(0x1af)+(_0x5eee7d[_0x3de6e2(0x1cc)][_0x3de6e2(0x185)]?_0x3de6e2(0x1b6):_0x3de6e2(0x186))+_0x3de6e2(0x1b5)+_0x5eee7d[_0x3de6e2(0x1cc)][_0x3de6e2(0x1d0)]+_0x3de6e2(0x192)+_0x5eee7d[_0x3de6e2(0x1cc)][_0x3de6e2(0x193)],this),await this['socket'][_0x3de6e2(0x1b8)](_0x13e165,await _0x23cb40),await this[_0x3de6e2(0x1a9)](),_0x28e28d();}catch(_0x4fa39b){a9_0x3220c0[_0x3de6e2(0x183)]('Error\x20Parsing\x20Msg\x20:\x20'+_0x4fa39b[_0x3de6e2(0x1bd)]),_0x467a2c(new Error(_0x3de6e2(0x1a6)+_0x4fa39b[_0x3de6e2(0x1bd)]));}};await this[_0xeb5f83(0x1ac)][_0xeb5f83(0x182)](_0x13e165,_0x182c33),await this[_0xeb5f83(0x1ac)]['on'](_0x13e165,_0x23cb40);}else await Helper[_0xeb5f83(0x18a)](0x3e8,this[_0xeb5f83(0x1a1)],_0xeb5f83(0x18b),this),_0x28e28d();}catch(_0x4a23fc){_0x467a2c(_0x4a23fc);}});}}
function a2_0x3d96(){const _0x557a53=['initWss','Successfully\x20Claim\x20','Try\x20to\x20Login...','fetch','money','missions','queryObj','info','768ZbHtph','WSS\x20Connection\x20Timeout','Conquest\x20Still\x20On\x20Cooldown\x20Or\x20Not\x20Enough\x20Money...','/mission?group=main','emit','data','push','LOSE','connect_error','...','\x20Offline\x20Profit....','/mission?group=partner','conquest','WSS\x20Connection\x20Closed\x20','Successfully\x20Attack\x20With\x20Result\x20','Receiving\x20WSS\x20Msg\x20:\x20','missionList','1249821YGjYsn','checkMission','WSS\x20Error\x20:\x20','19821DJNdxd','/auth','wss://cowtopia-ws.tonfarmer.com','enemies','profit','16joawPW','8644790XUFEqI','/user/game-info?','getMission','message','WSS\x20Connection\x20Error:\x20','\x20Money\x20And\x20','plainToken','https://cowtopia-be.tonfarmer.com','/user/offline-profit?','loot','Error\x20Parsing\x20Msg\x20:\x20','account','Successfully\x20Get\x20Game\x20info','215RmpEvF','off','1572YlTbVv','access_token','conquest-attack','/conquest/info?','POST','648900XBfyTO','query','attack_fee_money','check-mission','12sPRLRj','8484ardtCc','trophy','cool_down','Socket\x20ID:\x20','Getting\x20game\x20info...','reduce','32SpzsBD','stringify','GET','getGameInfo','Successfully\x20Get\x20Misisons','delay','WIN','....','WSS\x20Handshake\x20Timeout','claimOfflineProfit','WSS\x20Handshake\x20Error:\x20','\x20Completed\x20Successfully','websocket','socket','win',',\x20Got\x20','user','error','Starting\x20Conquest....','win_rate','348471JFXDQc','WSS\x20Connected...','completed','token'];a2_0x3d96=function(){return _0x557a53;};return a2_0x3d96();}const a2_0x4e0dcc=a2_0x1f62;(function(_0x2751b0,_0x4bb265){const _0x30ff33=a2_0x1f62,_0x50edd3=_0x2751b0();while(!![]){try{const _0xf69670=-parseInt(_0x30ff33(0xf5))/0x1*(-parseInt(_0x30ff33(0x11a))/0x2)+parseInt(_0x30ff33(0x12e))/0x3+parseInt(_0x30ff33(0x10a))/0x4*(parseInt(_0x30ff33(0x108))/0x5)+-parseInt(_0x30ff33(0xe1))/0x6*(-parseInt(_0x30ff33(0x114))/0x7)+parseInt(_0x30ff33(0xfa))/0x8*(parseInt(_0x30ff33(0xf2))/0x9)+parseInt(_0x30ff33(0x10f))/0xa+parseInt(_0x30ff33(0xfb))/0xb*(-parseInt(_0x30ff33(0x113))/0xc);if(_0xf69670===_0x4bb265)break;else _0x50edd3['push'](_0x50edd3['shift']());}catch(_0x316ba7){_0x50edd3['push'](_0x50edd3['shift']());}}}(a2_0x3d96,0x27912));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x6b9aa5 from'../utils/logger.js';function a2_0x1f62(_0x239e4d,_0x1ba3cb){const _0x3d96d0=a2_0x3d96();return a2_0x1f62=function(_0x1f621b,_0x3c291f){_0x1f621b=_0x1f621b-0xd8;let _0x3728a2=_0x3d96d0[_0x1f621b];return _0x3728a2;},a2_0x1f62(_0x239e4d,_0x1ba3cb);}import{io}from'socket.io-client';export class Cowtopia extends API{constructor(_0x4ce9a4,_0x48d774,_0x5809fb){const _0x2f7cc9=a2_0x1f62;super(_0x48d774,_0x2f7cc9(0x102)),this[_0x2f7cc9(0x106)]=_0x4ce9a4,this[_0x2f7cc9(0x110)]=_0x48d774,this[_0x2f7cc9(0xdf)]=_0x5809fb;}async['login'](){const _0x573db2=a2_0x1f62;try{await Helper[_0x573db2(0x11f)](0x1f4,this['account'],_0x573db2(0xdb),this);const _0x5d4869=await this[_0x573db2(0xdc)](_0x573db2(0xf6),_0x573db2(0x10e),undefined,undefined,{'X-Tg-Data':this[_0x573db2(0x110)]});await Helper[_0x573db2(0x11f)](0x3e8,this[_0x573db2(0x106)],'Successfully\x20Login',this),this[_0x573db2(0xd8)]='Bearer\x20'+_0x5d4869[_0x573db2(0xe6)][_0x573db2(0x10b)],this[_0x573db2(0x101)]=_0x5d4869[_0x573db2(0xe6)][_0x573db2(0x10b)],this[_0x573db2(0x12a)]=_0x5d4869[_0x573db2(0xe6)][_0x573db2(0x12a)];}catch(_0x1fecb2){throw _0x1fecb2;}}async[a2_0x4e0dcc(0x11d)](_0x544a14=![]){const _0x49c7f1=a2_0x4e0dcc;try{if(_0x544a14)await Helper[_0x49c7f1(0x11f)](0x1f4,this[_0x49c7f1(0x106)],_0x49c7f1(0x118),this);const _0xf6a52=await this[_0x49c7f1(0xdc)](_0x49c7f1(0xfc),_0x49c7f1(0x11c),this[_0x49c7f1(0xd8)]);if(_0x544a14)await Helper[_0x49c7f1(0x11f)](0x1f4,this['account'],_0x49c7f1(0x107),this);this['game']=_0xf6a52[_0x49c7f1(0xe6)],this[_0x49c7f1(0x12a)]=_0xf6a52[_0x49c7f1(0xe6)][_0x49c7f1(0x12a)];}catch(_0x4a5ce1){throw _0x4a5ce1;}}async[a2_0x4e0dcc(0xd9)](){return new Promise(async(_0x3b2907,_0x155273)=>{const _0x120578=a2_0x1f62;await Helper[_0x120578(0x11f)](0x3e8,this[_0x120578(0x106)],'Connecting\x20to\x20WSS...',this),this[_0x120578(0x127)]=io(_0x120578(0xf7),{'auth':{'token':this['plainToken']},'transports':[_0x120578(0x126)]}),this[_0x120578(0x127)]['on']('connect',async()=>{const _0x363872=_0x120578;await Helper[_0x363872(0x11f)](0x3e8,this[_0x363872(0x106)],_0x363872(0x12f),this),a2_0x6b9aa5['info']('WSS\x20Handshake\x20completed\x20and\x20connected.'),a2_0x6b9aa5[_0x363872(0xe0)](_0x363872(0x117)+this[_0x363872(0x127)]['id']),_0x3b2907();}),this[_0x120578(0x127)]['on'](_0x120578(0xe9),async _0xabdab5=>{const _0x11a0b7=_0x120578;await Helper[_0x11a0b7(0x11f)](0x3e8,this[_0x11a0b7(0x106)],_0x11a0b7(0xff)+_0xabdab5[_0x11a0b7(0xfe)],this),a2_0x6b9aa5['error'](_0x11a0b7(0x124)+_0xabdab5[_0x11a0b7(0xfe)]),_0x155273(_0xabdab5);}),this[_0x120578(0x127)]['on']('connect_timeout',async()=>{const _0x3a742b=_0x120578;await Helper['delay'](0x3e8,this[_0x3a742b(0x106)],_0x3a742b(0xe2),this),a2_0x6b9aa5[_0x3a742b(0x12b)](_0x3a742b(0x122)),_0x155273(new Error(_0x3a742b(0x122)));}),this['socket']['on'](_0x120578(0x12b),async _0x14ac89=>{const _0x25f1b7=_0x120578;await Helper['delay'](0x3e8,this[_0x25f1b7(0x106)],'WSS\x20Error\x20:\x20'+_0x14ac89[_0x25f1b7(0xfe)],this),a2_0x6b9aa5[_0x25f1b7(0x12b)](_0x25f1b7(0xf4)+_0x14ac89[_0x25f1b7(0xfe)]),_0x155273(_0x14ac89);}),this[_0x120578(0x127)]['on']('disconnect',async _0x69d9b8=>{const _0x121615=_0x120578;await Helper[_0x121615(0x11f)](0x3e8,this[_0x121615(0x106)],_0x121615(0xee)+_0x69d9b8+_0x121615(0xea),this),a2_0x6b9aa5[_0x121615(0xe0)]('WSS\x20Disconnected:\x20'+_0x69d9b8);});});}async[a2_0x4e0dcc(0xfd)](){const _0x4e65e2=a2_0x4e0dcc;try{await Helper['delay'](0x1f4,this[_0x4e65e2(0x106)],'Getting\x20Missions...',this),this[_0x4e65e2(0xf1)]=[];const _0x1fdc00=await this[_0x4e65e2(0xdc)](_0x4e65e2(0xe4),_0x4e65e2(0x11c),this[_0x4e65e2(0xd8)]);this['missionList'][_0x4e65e2(0xe7)](..._0x1fdc00[_0x4e65e2(0xe6)][_0x4e65e2(0xde)]);const _0x4d3b32=await this['fetch'](_0x4e65e2(0xec),_0x4e65e2(0x11c),this[_0x4e65e2(0xd8)]);this[_0x4e65e2(0xf1)][_0x4e65e2(0xe7)](..._0x4d3b32['data'][_0x4e65e2(0xde)]),await Helper[_0x4e65e2(0x11f)](0x3e8,this[_0x4e65e2(0x106)],_0x4e65e2(0x11e),this);}catch(_0x58a64d){throw _0x58a64d;}}async[a2_0x4e0dcc(0xf3)](_0x3297dd){return new Promise(async(_0x4b8d2e,_0x14ac3c)=>{const _0x562000=a2_0x1f62;try{await Helper[_0x562000(0x11f)](0x1f4,this[_0x562000(0x106)],'Checking\x20Missions\x20'+_0x3297dd+_0x562000(0x121),this);const _0x3a96c9=_0x562000(0x112),_0x279f85={'mission_key':_0x3297dd},_0x2e8948=async _0x3eedbf=>{const _0x21cd6c=_0x562000;try{a2_0x6b9aa5['info']('Receiving\x20WSS\x20Msg\x20:\x20'+JSON['stringify'](_0x3eedbf)),_0x3eedbf[_0x21cd6c(0xe6)][_0x21cd6c(0x130)]==!![]?await Helper[_0x21cd6c(0x11f)](0x7d0,this[_0x21cd6c(0x106)],'Mission\x20'+_0x3297dd+_0x21cd6c(0x125),this):await Helper[_0x21cd6c(0x11f)](0x3e8,this['account'],'Failed\x20to\x20Complete\x20Mission\x20'+_0x3297dd,this),await this[_0x21cd6c(0x11d)](),await this[_0x21cd6c(0x127)][_0x21cd6c(0x109)](_0x3a96c9,await _0x2e8948),_0x4b8d2e();}catch(_0x34ede2){a2_0x6b9aa5[_0x21cd6c(0x12b)](_0x21cd6c(0x105)+_0x34ede2[_0x21cd6c(0xfe)]),_0x14ac3c(new Error(_0x21cd6c(0x105)+_0x34ede2['message']));}};await this[_0x562000(0x127)][_0x562000(0xe5)](_0x3a96c9,_0x279f85),await this[_0x562000(0x127)]['on'](_0x3a96c9,_0x2e8948);}catch(_0x31bb8f){throw _0x31bb8f;}});}async[a2_0x4e0dcc(0x123)](){return new Promise(async(_0x415bff,_0xcb7447)=>{const _0x13bce8=a2_0x1f62;try{await Helper[_0x13bce8(0x11f)](0x3e8,this['account'],'Claiming\x20Offline\x20Profit....',this);const _0x5e1961=await this['fetch'](_0x13bce8(0x103),'GET',this[_0x13bce8(0xd8)]);await Helper['delay'](0x3e8,this[_0x13bce8(0x106)],'Claiming\x20'+_0x5e1961[_0x13bce8(0xe6)]['profit']+_0x13bce8(0xeb),this);const _0x2d5afe='claim-offline',_0x1565d6={'boost':![]},_0x2f0c3b=async _0x123025=>{const _0x44e4a3=_0x13bce8;try{a2_0x6b9aa5[_0x44e4a3(0xe0)](_0x44e4a3(0xf0)+JSON['stringify'](_0x123025)),this['user']=_0x123025['data'][_0x44e4a3(0x12a)],await Helper['delay'](0x7d0,this['account'],_0x44e4a3(0xda)+_0x123025['data'][_0x44e4a3(0xf9)]+'\x20Offline\x20Profit....',this),await this[_0x44e4a3(0x11d)](),await this[_0x44e4a3(0x127)][_0x44e4a3(0x109)](_0x2d5afe,await _0x2f0c3b),_0x415bff();}catch(_0x3bf4c1){a2_0x6b9aa5[_0x44e4a3(0x12b)](_0x44e4a3(0x105)+_0x3bf4c1[_0x44e4a3(0xfe)]),_0xcb7447(new Error('Error\x20Parsing\x20Msg\x20:\x20'+_0x3bf4c1['message']));}};await this[_0x13bce8(0x127)][_0x13bce8(0xe5)](_0x2d5afe,_0x1565d6),await this[_0x13bce8(0x127)]['on'](_0x2d5afe,_0x2f0c3b);}catch(_0x4f540c){_0xcb7447(_0x4f540c);}});}async[a2_0x4e0dcc(0xed)](){return new Promise(async(_0x2414b0,_0x46159a)=>{const _0x5096bc=a2_0x1f62;try{await Helper['delay'](0x3e8,this[_0x5096bc(0x106)],_0x5096bc(0x12c),this);const _0x20037d=await this[_0x5096bc(0xdc)](_0x5096bc(0x10d),'GET',this[_0x5096bc(0xd8)]),_0x293a3b=_0x20037d[_0x5096bc(0xe6)][_0x5096bc(0xf8)],_0x23fd95=_0x293a3b[_0x5096bc(0x119)]((_0x5d003b,_0x1f118c)=>{const _0x15f378=_0x5096bc;return _0x1f118c['win_rate']>_0x5d003b[_0x15f378(0x12d)]?_0x1f118c:_0x5d003b;},_0x293a3b[0x0]);if(_0x20037d[_0x5096bc(0xe6)][_0x5096bc(0x116)]==0x0&&this[_0x5096bc(0x12a)][_0x5096bc(0xdd)]>_0x20037d[_0x5096bc(0xe6)][_0x5096bc(0x111)]){await Helper[_0x5096bc(0x11f)](0xbb8,this[_0x5096bc(0x106)],'Enemy\x20With\x20Highest\x20Win\x20Rate\x20'+_0x20037d[_0x5096bc(0xe6)][_0x5096bc(0xf9)]+'\x20',this);const _0x8ec267=_0x5096bc(0x10c),_0x487b61={'enemy_id':_0x23fd95['user_id'],'currency':_0x5096bc(0xdd)},_0x808709=async _0x1a5b97=>{const _0x31151b=_0x5096bc;try{a2_0x6b9aa5[_0x31151b(0xe0)](_0x31151b(0xf0)+JSON[_0x31151b(0x11b)](_0x1a5b97)),await Helper[_0x31151b(0x11f)](0x7d0,this[_0x31151b(0x106)],_0x31151b(0xef)+(_0x1a5b97['data'][_0x31151b(0x128)]?_0x31151b(0x120):_0x31151b(0xe8))+_0x31151b(0x129)+_0x1a5b97['data'][_0x31151b(0x104)]+_0x31151b(0x100)+_0x1a5b97['data'][_0x31151b(0x115)],this),await this[_0x31151b(0x127)][_0x31151b(0x109)](_0x8ec267,await _0x808709),await this[_0x31151b(0x11d)](),_0x2414b0();}catch(_0x10ba3d){a2_0x6b9aa5[_0x31151b(0x12b)](_0x31151b(0x105)+_0x10ba3d[_0x31151b(0xfe)]),_0x46159a(new Error(_0x31151b(0x105)+_0x10ba3d[_0x31151b(0xfe)]));}};await this[_0x5096bc(0x127)][_0x5096bc(0xe5)](_0x8ec267,_0x487b61),await this[_0x5096bc(0x127)]['on'](_0x8ec267,_0x808709);}else await Helper[_0x5096bc(0x11f)](0x3e8,this['account'],_0x5096bc(0xe3),this),_0x2414b0();}catch(_0x4dfd66){_0x46159a(_0x4dfd66);}});}}
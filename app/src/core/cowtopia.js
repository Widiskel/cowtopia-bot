const a2_0x55a247=a2_0x3ba8;(function(_0x20aa78,_0x3e5c75){const _0x5236f9=a2_0x3ba8,_0x5c9b73=_0x20aa78();while(!![]){try{const _0x49a238=parseInt(_0x5236f9(0x190))/0x1+parseInt(_0x5236f9(0x1ae))/0x2+parseInt(_0x5236f9(0x197))/0x3+parseInt(_0x5236f9(0x179))/0x4*(parseInt(_0x5236f9(0x170))/0x5)+-parseInt(_0x5236f9(0x19a))/0x6*(parseInt(_0x5236f9(0x1c0))/0x7)+parseInt(_0x5236f9(0x16b))/0x8+-parseInt(_0x5236f9(0x18f))/0x9;if(_0x49a238===_0x3e5c75)break;else _0x5c9b73['push'](_0x5c9b73['shift']());}catch(_0x2099b7){_0x5c9b73['push'](_0x5c9b73['shift']());}}}(a2_0x4a1b,0x697c0));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x2fffeb from'../utils/logger.js';import{io}from'socket.io-client';function a2_0x4a1b(){const _0x20fa27=['queryObj','1432263qCzKhW','Claiming\x20Offline\x20Profit....','trophy','websocket','off','error','data','money','conquest','2526000CxmqkK','Starting\x20Conquest....','query','WSS\x20Handshake\x20completed\x20and\x20connected.','POST','1938710qUblaq',',\x20Got\x20','profit','WIN','WSS\x20Error\x20:\x20','Getting\x20game\x20info...','account','LOSE','user','4LMXHws','/mission?group=main','disconnect','conquest-attack','Enemy\x20With\x20Highest\x20Win\x20Rate\x20','Socket\x20ID:\x20','win_rate','missionList','check-mission','push','\x20Offline\x20Profit....','Conquest\x20Still\x20On\x20Cooldown\x20Or\x20Not\x20Enough\x20Money...','Try\x20to\x20Login...','enemies','/user/offline-profit?','Claiming\x20','success','Receiving\x20WSS\x20Msg\x20:\x20','Connecting\x20to\x20WSS...','completed','fetch','token','4869819wolhcQ','656400boTLfI','/conquest/info?','/auth','Successfully\x20Claim\x20','game','emit','delay','568785oqBqAT','Mission\x20','stringify','18CaTUKI','...','Error\x20Parsing\x20Msg\x20:\x20','access_token','WSS\x20Handshake\x20Error:\x20','user_id','....','Checking\x20Missions\x20','claim-offline','missions','cool_down','wss://cowtopia-ws.tonfarmer.com','claimOfflineProfit','getMission','\x20Completed\x20Successfully','https://cowtopia-be.tonfarmer.com','WSS\x20Connection\x20Timeout','login','Successfully\x20Attack\x20With\x20Result\x20','WSS\x20Connection\x20Closed\x20','74990maiZZa','GET','initWss','Getting\x20Missions...','connect_error','plainToken','connect','Failed\x20to\x20Complete\x20Mission\x20','WSS\x20Connection\x20Error:\x20','loot','socket','message','getGameInfo','WSS\x20Handshake\x20Timeout','attack_fee_money','info','Bearer\x20'];a2_0x4a1b=function(){return _0x20fa27;};return a2_0x4a1b();}function a2_0x3ba8(_0x46e2fe,_0x5f0820){const _0x4a1b4a=a2_0x4a1b();return a2_0x3ba8=function(_0x3ba8ea,_0x4c4636){_0x3ba8ea=_0x3ba8ea-0x16b;let _0x45f151=_0x4a1b4a[_0x3ba8ea];return _0x45f151;},a2_0x3ba8(_0x46e2fe,_0x5f0820);}export class Cowtopia extends API{constructor(_0x6c1449,_0x2fb5ee,_0x1a2cb6){const _0x9f34c0=a2_0x3ba8;super(_0x2fb5ee,_0x9f34c0(0x1a9)),this[_0x9f34c0(0x176)]=_0x6c1449,this[_0x9f34c0(0x16d)]=_0x2fb5ee,this[_0x9f34c0(0x1bf)]=_0x1a2cb6;}async[a2_0x55a247(0x1ab)](){const _0x483490=a2_0x55a247;try{await Helper[_0x483490(0x196)](0x1f4,this[_0x483490(0x176)],_0x483490(0x185),this);const _0x4da164=await this[_0x483490(0x18d)](_0x483490(0x192),_0x483490(0x16f),undefined,undefined,{'X-Tg-Data':this['query']});await Helper[_0x483490(0x196)](0x3e8,this[_0x483490(0x176)],'Successfully\x20Login',this),this['token']=_0x483490(0x1be)+_0x4da164[_0x483490(0x1c6)][_0x483490(0x19d)],this[_0x483490(0x1b3)]=_0x4da164[_0x483490(0x1c6)][_0x483490(0x19d)],this[_0x483490(0x178)]=_0x4da164['data'][_0x483490(0x178)];}catch(_0x413b4d){throw _0x413b4d;}}async[a2_0x55a247(0x1ba)](_0x7c1d4e=![]){const _0x17af52=a2_0x55a247;try{if(_0x7c1d4e)await Helper['delay'](0x1f4,this[_0x17af52(0x176)],_0x17af52(0x175),this);const _0x3126f6=await this[_0x17af52(0x18d)]('/user/game-info?',_0x17af52(0x1af),this['token']);if(_0x7c1d4e)await Helper[_0x17af52(0x196)](0x1f4,this[_0x17af52(0x176)],'Successfully\x20Get\x20Game\x20info',this);this[_0x17af52(0x194)]=_0x3126f6[_0x17af52(0x1c6)],this['user']=_0x3126f6[_0x17af52(0x1c6)]['user'];}catch(_0x3c3200){throw _0x3c3200;}}async[a2_0x55a247(0x1b0)](){return new Promise(async(_0x4f0849,_0xe55da6)=>{const _0xc59b15=a2_0x3ba8;await Helper[_0xc59b15(0x196)](0x3e8,this[_0xc59b15(0x176)],_0xc59b15(0x18b),this),this[_0xc59b15(0x1b8)]=io(_0xc59b15(0x1a5),{'auth':{'token':this['plainToken']},'transports':[_0xc59b15(0x1c3)]}),this[_0xc59b15(0x1b8)]['on'](_0xc59b15(0x1b4),async()=>{const _0x304f04=_0xc59b15;await Helper['delay'](0x3e8,this['account'],'WSS\x20Connected...',this),a2_0x2fffeb[_0x304f04(0x1bd)](_0x304f04(0x16e)),a2_0x2fffeb[_0x304f04(0x1bd)](_0x304f04(0x17e)+this[_0x304f04(0x1b8)]['id']),_0x4f0849();}),this[_0xc59b15(0x1b8)]['on'](_0xc59b15(0x1b2),async _0x2c5ffd=>{const _0x2a93e5=_0xc59b15;await Helper[_0x2a93e5(0x196)](0x3e8,this[_0x2a93e5(0x176)],_0x2a93e5(0x1b6)+_0x2c5ffd[_0x2a93e5(0x1b9)],this),a2_0x2fffeb[_0x2a93e5(0x1c5)](_0x2a93e5(0x19e)+_0x2c5ffd['message']),_0xe55da6(_0x2c5ffd);}),this[_0xc59b15(0x1b8)]['on']('connect_timeout',async()=>{const _0x1e8974=_0xc59b15;await Helper[_0x1e8974(0x196)](0x3e8,this['account'],_0x1e8974(0x1aa),this),a2_0x2fffeb[_0x1e8974(0x1c5)](_0x1e8974(0x1bb)),_0xe55da6(new Error(_0x1e8974(0x1bb)));}),this[_0xc59b15(0x1b8)]['on']('error',async _0xf7427f=>{const _0x473a04=_0xc59b15;await Helper['delay'](0x3e8,this[_0x473a04(0x176)],_0x473a04(0x174)+_0xf7427f[_0x473a04(0x1b9)],this),a2_0x2fffeb['error'](_0x473a04(0x174)+_0xf7427f[_0x473a04(0x1b9)]),_0xe55da6(_0xf7427f);}),this[_0xc59b15(0x1b8)]['on'](_0xc59b15(0x17b),async _0x2a3d94=>{const _0x525204=_0xc59b15;await Helper[_0x525204(0x196)](0x3e8,this[_0x525204(0x176)],_0x525204(0x1ad)+_0x2a3d94+_0x525204(0x19b),this),a2_0x2fffeb['info']('WSS\x20Disconnected:\x20'+_0x2a3d94);});});}async[a2_0x55a247(0x1a7)](){const _0x3f799f=a2_0x55a247;try{await Helper[_0x3f799f(0x196)](0x1f4,this[_0x3f799f(0x176)],_0x3f799f(0x1b1),this),this['missionList']=[];const _0x1974a1=await this[_0x3f799f(0x18d)](_0x3f799f(0x17a),_0x3f799f(0x1af),this[_0x3f799f(0x18e)]);this[_0x3f799f(0x180)][_0x3f799f(0x182)](..._0x1974a1[_0x3f799f(0x1c6)]['missions']);const _0x11db40=await this[_0x3f799f(0x18d)]('/mission?group=partner',_0x3f799f(0x1af),this[_0x3f799f(0x18e)]);this[_0x3f799f(0x180)][_0x3f799f(0x182)](..._0x11db40[_0x3f799f(0x1c6)][_0x3f799f(0x1a3)]),await Helper['delay'](0x3e8,this[_0x3f799f(0x176)],'Successfully\x20Get\x20Misisons',this);}catch(_0x143eac){throw _0x143eac;}}async['checkMission'](_0x40e298){return new Promise(async(_0x462e68,_0x213f9c)=>{const _0x2d3797=a2_0x3ba8;try{await Helper['delay'](0x1f4,this[_0x2d3797(0x176)],_0x2d3797(0x1a1)+_0x40e298+_0x2d3797(0x1a0),this);const _0x2acf93=_0x2d3797(0x181),_0x19c136={'mission_key':_0x40e298},_0xdd947b=async _0x78743d=>{const _0x5c3b97=_0x2d3797;try{a2_0x2fffeb[_0x5c3b97(0x1bd)](_0x5c3b97(0x18a)+JSON['stringify'](_0x78743d)),_0x78743d[_0x5c3b97(0x1c6)][_0x5c3b97(0x18c)]==!![]?await Helper[_0x5c3b97(0x196)](0x7d0,this['account'],_0x5c3b97(0x198)+_0x40e298+_0x5c3b97(0x1a8),this):await Helper['delay'](0x3e8,this['account'],_0x5c3b97(0x1b5)+_0x40e298,this),await this[_0x5c3b97(0x1ba)](),await this['socket'][_0x5c3b97(0x1c4)](_0x2acf93,await _0xdd947b),_0x462e68();}catch(_0x2faf63){a2_0x2fffeb[_0x5c3b97(0x1c5)](_0x5c3b97(0x19c)+_0x2faf63[_0x5c3b97(0x1b9)]),_0x213f9c(new Error(_0x5c3b97(0x19c)+_0x2faf63[_0x5c3b97(0x1b9)]));}};await this['socket'][_0x2d3797(0x195)](_0x2acf93,_0x19c136),await this[_0x2d3797(0x1b8)]['on'](_0x2acf93,_0xdd947b);}catch(_0x4e0944){throw _0x4e0944;}});}async[a2_0x55a247(0x1a6)](){return new Promise(async(_0x98c3aa,_0x1b34aa)=>{const _0x3157c4=a2_0x3ba8;try{await Helper[_0x3157c4(0x196)](0x3e8,this[_0x3157c4(0x176)],_0x3157c4(0x1c1),this);const _0x58cb9c=await this[_0x3157c4(0x18d)](_0x3157c4(0x187),_0x3157c4(0x1af),this['token']);await Helper[_0x3157c4(0x196)](0x3e8,this[_0x3157c4(0x176)],_0x3157c4(0x188)+_0x58cb9c[_0x3157c4(0x1c6)][_0x3157c4(0x172)]+_0x3157c4(0x183),this);const _0x2a6e7a=_0x3157c4(0x1a2),_0x493d23={'boost':![]},_0x5ed057=async _0xe80822=>{const _0x4f0c74=_0x3157c4;try{a2_0x2fffeb[_0x4f0c74(0x1bd)]('Receiving\x20WSS\x20Msg\x20:\x20'+JSON[_0x4f0c74(0x199)](_0xe80822)),this[_0x4f0c74(0x178)]=_0xe80822['data'][_0x4f0c74(0x178)],await Helper['delay'](0x7d0,this[_0x4f0c74(0x176)],_0x4f0c74(0x193)+_0xe80822[_0x4f0c74(0x1c6)][_0x4f0c74(0x172)]+'\x20Offline\x20Profit....',this),await this[_0x4f0c74(0x1ba)](),await this[_0x4f0c74(0x1b8)]['off'](_0x2a6e7a,await _0x5ed057),_0x98c3aa();}catch(_0x17406f){a2_0x2fffeb['error'](_0x4f0c74(0x19c)+_0x17406f[_0x4f0c74(0x1b9)]),_0x1b34aa(new Error('Error\x20Parsing\x20Msg\x20:\x20'+_0x17406f[_0x4f0c74(0x1b9)]));}};await this['socket'][_0x3157c4(0x195)](_0x2a6e7a,_0x493d23),await this['socket']['on'](_0x2a6e7a,_0x5ed057);}catch(_0x326059){_0x1b34aa(_0x326059);}});}async[a2_0x55a247(0x1c8)](){return new Promise(async(_0x2ec971,_0x21ccfb)=>{const _0x19c490=a2_0x3ba8;try{await Helper[_0x19c490(0x196)](0x3e8,this[_0x19c490(0x176)],_0x19c490(0x16c),this);const _0x579c6c=await this[_0x19c490(0x18d)](_0x19c490(0x191),'GET',this[_0x19c490(0x18e)]);_0x579c6c[_0x19c490(0x189)]==![]&&(await Helper[_0x19c490(0x196)](0xbb8,this['account'],_0x579c6c[_0x19c490(0x1c5)]['message'],this),_0x2ec971());const _0x52e4d1=_0x579c6c['data'][_0x19c490(0x186)],_0x2082c8=_0x52e4d1['reduce']((_0x8df121,_0x32a6e8)=>{const _0x432540=_0x19c490;return _0x32a6e8[_0x432540(0x17f)]>_0x8df121['win_rate']?_0x32a6e8:_0x8df121;},_0x52e4d1[0x0]);if(_0x579c6c[_0x19c490(0x1c6)][_0x19c490(0x1a4)]==0x0&&this['user'][_0x19c490(0x1c7)]>_0x579c6c[_0x19c490(0x1c6)][_0x19c490(0x1bc)]){await Helper[_0x19c490(0x196)](0xbb8,this[_0x19c490(0x176)],_0x19c490(0x17d)+_0x579c6c[_0x19c490(0x1c6)][_0x19c490(0x172)]+'\x20',this);const _0x522aa4=_0x19c490(0x17c),_0x18bc76={'enemy_id':_0x2082c8[_0x19c490(0x19f)],'currency':_0x19c490(0x1c7)},_0x1bd4d5=async _0x34c20e=>{const _0x10e5cb=_0x19c490;try{a2_0x2fffeb[_0x10e5cb(0x1bd)]('Receiving\x20WSS\x20Msg\x20:\x20'+JSON[_0x10e5cb(0x199)](_0x34c20e)),await Helper[_0x10e5cb(0x196)](0x7d0,this[_0x10e5cb(0x176)],_0x10e5cb(0x1ac)+(_0x34c20e['data']['win']?_0x10e5cb(0x173):_0x10e5cb(0x177))+_0x10e5cb(0x171)+_0x34c20e[_0x10e5cb(0x1c6)][_0x10e5cb(0x1b7)]+'\x20Money\x20And\x20'+_0x34c20e[_0x10e5cb(0x1c6)][_0x10e5cb(0x1c2)],this),await this[_0x10e5cb(0x1b8)]['off'](_0x522aa4,await _0x1bd4d5),await this[_0x10e5cb(0x1ba)](),_0x2ec971();}catch(_0x2e6526){a2_0x2fffeb[_0x10e5cb(0x1c5)](_0x10e5cb(0x19c)+_0x2e6526['message']),_0x21ccfb(new Error(_0x10e5cb(0x19c)+_0x2e6526[_0x10e5cb(0x1b9)]));}};await this[_0x19c490(0x1b8)][_0x19c490(0x195)](_0x522aa4,_0x18bc76),await this[_0x19c490(0x1b8)]['on'](_0x522aa4,_0x1bd4d5);}else await Helper[_0x19c490(0x196)](0x3e8,this[_0x19c490(0x176)],_0x19c490(0x184),this),_0x2ec971();}catch(_0x9ef9cc){_0x21ccfb(_0x9ef9cc);}});}}